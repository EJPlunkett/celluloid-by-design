<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Swipe Cards - Celluloid by Design</title>
  <style>
    body {
      margin: 0;
      background-color: #f6f5f3;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow: hidden;
    }

    header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: transparent;
      position: relative;
      z-index: 1100;
      height: 60px;
    }

    .nav-toggle {
      position: absolute;
      top: 13px;
      left: 13px;
      width: 36px;
      height: 30px;
      cursor: pointer;
      z-index: 1200;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: transparent;
      border-radius: 6px;
      border: none;
      padding: 0;
    }

    .nav-toggle span {
      display: block;
      height: 4px;
      background: #000;
      border-radius: 2px;
      width: 100%;
      transition: all 0.3s ease;
    }

    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 320px;
      height: 100vh;
      background-color: #f6f5f3;
      border: 10px solid #000;
      border-radius: 0 20px 20px 0;
      box-sizing: border-box;
      transform: translateX(calc(-100% - 20px));
      transition: transform 0.3s ease;
      z-index: 1050;
      padding: 20px 20px 40px 40px;
      overflow-y: auto;
    }

    .nav-overlay.open {
      transform: translateX(0);
    }

    .nav-section-title {
      height: 30px;
      width: auto;
      max-width: 280px;
      margin-bottom: 16px;
      cursor: pointer;
      display: block;
      object-fit: contain;
    }
    .nav-section-title.donate-menu {
      height: 24px;
    }

    .nav-section-title:first-of-type {
      margin-top: 20px;
    }

    .nav-list {
      list-style: disc inside;
      padding-left: 0;
      margin-top: 0;
      margin-bottom: 30px;
      font-weight: 400;
      font-size: 18px;
    }

    .nav-list li {
      margin-bottom: 12px;
    }

    .nav-list li a {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }

    .nav-list li a:hover {
      text-decoration: underline;
    }

    .main-wrapper {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      padding-top: 60px;
      overflow: hidden;
    }

    .card {
      background-color: #000;
      border-radius: 24px;
      width: 90vw;
      max-width: 400px;
      max-height: calc(100vh - 120px);
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      padding: 16px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.6s ease;
      cursor: grab;
    }

    .card:active {
      cursor: grabbing;
    }

    .card.swiping {
      transition: none;
    }

    .card-inner {
      flex: 1;
      border-radius: 20px;
      border: 2px solid #f6f5f3;
      padding: 36px 24px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .card-content {
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex-grow: 1;
      gap: 24px;
    }

    .card h1, .card h2, .card h3, .card p {
      color: #f6f5f3;
      margin: 0;
    }

    .card h1 {
      font-size: 1.8em;
      font-weight: 700;
    }

    .card h2 {
      font-size: 1.2em;
      font-weight: 500;
    }

    .card h3 {
      font-size: 1em;
      font-style: italic;
    }

    .card p {
      font-size: 1em;
      font-weight: 700;
      line-height: 1.6;
    }

    .icon-container {
      display: flex;
      justify-content: space-evenly;
      align-items: center;
      padding-top: 20px;
    }

    .icon-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #f6f5f3;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    .icon-button img {
      width: 28px;
      height: 28px;
    }

    #watchlist-link {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      padding: 20px 20px 0;
      margin-top: -60px;
    }

    #watchlist-link p {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 20px;
      color: #000;
    }

    footer {
      font-size: 14px;
      color: #000;
      text-align: center;
      padding: 30px 20px 20px;
      background: #f6f5f3;
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </header>

  <nav id="nav-menu" class="nav-overlay" aria-hidden="true">
    <a href="match.html">
      <img src="Match By.png" alt="Match By" class="nav-section-title" />
    </a>
    <ul class="nav-list">
      <li><a href="vibes.html">Describe a Vibe</a></li>
      <li><a href="color.html">Pick a Color</a></li>
      <li><a href="words.html">Choose Keywords</a></li>
      <li><a href="surprise.html">Surprise Me</a></li>
    </ul>
    <a href="watchlist.html">
      <img src="Watchlist.png" alt="Watchlist" class="nav-section-title" />
    </a>
    <ul class="nav-list">
      <li><a href="create.html">Create Account</a></li>
      <li><a href="account.html">Sign In</a></li>
    </ul>
    <a href="about.html">
      <img src="About.png" alt="About" class="nav-section-title" />
    </a>
    
    <a href="donate.html">
      <img src="donate menu.png" alt="Donate" class="nav-section-title donate-menu" />
    </a>
  </nav>

  <main class="main-wrapper">
    <div id="card-stack"></div>
    <div id="watchlist-link" style="display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px 20px 40px; max-width: 480px; margin: 0 auto;">
      <a href="watchlist.html" onclick="jigglePopcorn(event)">
        <img src="popcorn.png" alt="Popcorn" id="popcornImage" style="width: 100px; height: auto; margin-bottom: 20px; cursor: pointer; transition: transform 0.3s ease;" />
      </a>
      <p style="font-weight: normal; font-size: 18px; margin-bottom: 50px; color: #000; line-height: 1.5; white-space: pre-wrap;">
        Watchlist complete, curated by your vibe.
Tap the popcorn to view your movies, or click below to explore more vibes.
      </p>
      <a href="match.html">
        <img src="GoButton.png" alt="Go Button" style="width: 160px; height: auto; cursor: pointer;" />
      </a>
    </div>
  </main>

  <footer>
    <span class="credit">© 2025 Celluloid by Design</span>
  </footer>

  <script>
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    navToggle.addEventListener('click', () => {
      const isOpen = navMenu.classList.toggle('open');
      navToggle.setAttribute('aria-expanded', isOpen);
      navMenu.setAttribute('aria-hidden', !isOpen);
    });

    const sampleMovies = [
      { title: "Liquid Sky", year: "1982", decade: "1980s", desc: "Neon-drenched punk surrealism with harsh primary colors, stark geometric makeup, and crystalline sci-fi textures creating an alien downtown art scene" },
      { title: "Desperately Seeking Susan", year: "1985", decade: "1980s", desc: "Vibrant downtown bohemian chaos with layered vintage textures, warm golden lighting, and eclectic thrift-store maximalism" },
      { title: "Basquiat", year: "1996", decade: "1980s", desc: "Raw artistic authenticity with paint-splattered loft spaces, warm amber gallery lighting, and gritty creative disorder" },
      { title: "After Hours", year: "1985", decade: "1980s", desc: "Surreal nocturnal nightmare with harsh fluorescent whites, deep shadow contrasts, and claustrophobic urban maze aesthetics" },
      { title: "Party Girl", year: "1995", decade: "1990s", desc: "Glossy club-kid excess with strobing dance floor lights, metallic fashion textures, and high-energy nightlife glamour" },
      { title: "Alphabet City", year: "1984", decade: "1980s", desc: "Gritty street-level realism with weathered brick textures, amber streetlight glow, and shadowy urban decay" },
      { title: "200 Cigarettes", year: "1999", decade: "1980s", desc: "Retro New Year's Eve nostalgia with warm party lighting, vintage costume textures, and celebratory urban energy" },
      { title: "Slaves of New York", year: "1989", decade: "1980s", desc: "Artsy downtown minimalism with stark white gallery spaces, muted fashion palettes, and bohemian creative poverty" },
      { title: "American Psycho", year: "2000", decade: "1980s", desc: "Sterile corporate minimalism with razor-sharp geometric precision, clinical high-end luxury surfaces, and pristine architectural coldness" },
      { title: "The Driller Killer", year: "1979", decade: "1970s", desc: "Raw guerrilla filmmaking with grainy 16mm textures, harsh urban lighting, and gritty street-level documentation" },
      { title: "Cruising", year: "1980", decade: "1970s", desc: "Grimy nocturnal urban underbelly with harsh neon-soaked darkness, claustrophobic dive bar interiors, and sweat-drenched leather textures" },
      { title: "Serendipity", year: "2001", decade: "2000s", desc: "Romantic golden-hour warmth with soft café lighting, cozy winter textures, and whimsical urban charm" },
      { title: "Scrooged", year: "1988", decade: "1980s", desc: "Glitzy corporate excess with blazing television studio artificiality, over-the-top holiday kitsch, and increasingly surreal visual chaos" },
      { title: "The Secret of My Success", year: "1987", decade: "1980s", desc: "Slick corporate glamour with gleaming Manhattan office towers, polished power-suit sophistication, and energetic montage-driven pacing" },
      { title: "Taxi Driver", year: "1976", decade: "1970s", desc: "Neon-soaked urban alienation with steam-hazed streets, amber-filtered cab windows, and the hypnotic glow of Times Square's seedy underbelly" }
    ];
    
    let currentIndex = 0;
    const maxCards = 15; // Updated to match the number of movies
    const cardStack = document.getElementById("card-stack");
    const watchlistLink = document.getElementById("watchlist-link");

    function createCard(movie) {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="card-inner">
          <div class="card-content">
            <h1>${movie.title} (${movie.year})</h1>
            <h2>${movie.decade}</h2>
            <p>${movie.desc}</p>
          </div>
          <div class="icon-container">
            <div class="icon-button" onclick="swipeLeft(this)">
              <img src="cross.png" alt="Dislike" />
            </div>
            <div class="icon-button" onclick="swipeRight(this)">
              <img src="heart.png" alt="Like" />
            </div>
          </div>
        </div>`;
      return card;
    }

    function showNextCard() {
      if (currentIndex >= maxCards) {
        watchlistLink.style.display = "flex";
        return;
      }
      const nextMovie = sampleMovies[currentIndex % sampleMovies.length];
      const card = createCard(nextMovie);
      cardStack.prepend(card);
      currentIndex++;
    }

    function swipeLeft(element) {
      const card = element.closest(".card");
      card.style.transform = "translateX(-120vw) rotate(-20deg) scale(0.8)";
      card.style.opacity = "0";
      setTimeout(() => card.remove(), 600);
      showNextCard();
    }

    function swipeRight(element) {
      const card = element.closest(".card");
      card.style.transform = "translateX(120vw) rotate(20deg) scale(0.8)";
      card.style.opacity = "0";
      setTimeout(() => card.remove(), 600);
      showNextCard();
    }

    showNextCard();

    let touchStartX = 0;
    let isDragging = false;
    
    cardStack.addEventListener('touchstart', function (e) {
      touchStartX = e.changedTouches[0].screenX;
      isDragging = true;
      const activeCard = document.querySelector(".card");
      if (activeCard) {
        activeCard.classList.add('swiping');
      }
    }, false);

    cardStack.addEventListener('touchmove', function (e) {
      if (!isDragging) return;
      const activeCard = document.querySelector(".card");
      if (!activeCard) return;
      
      const touchCurrentX = e.changedTouches[0].screenX;
      const diffX = touchCurrentX - touchStartX;
      const rotation = diffX * 0.1;
      const opacity = Math.max(0.3, 1 - Math.abs(diffX) / 300);
      
      activeCard.style.transform = `translateX(${diffX}px) rotate(${rotation}deg)`;
      activeCard.style.opacity = opacity;
    }, false);

    cardStack.addEventListener('touchend', function (e) {
      if (!isDragging) return;
      isDragging = false;
      
      const touchEndX = e.changedTouches[0].screenX;
      const diffX = touchEndX - touchStartX;
      const activeCard = document.querySelector(".card");
      if (!activeCard) return;

      activeCard.classList.remove('swiping');

      if (Math.abs(diffX) > 80) {
        if (diffX > 0) {
          swipeRight(activeCard.querySelector(".icon-button:last-child"));
        } else {
          swipeLeft(activeCard.querySelector(".icon-button:first-child"));
        }
      } else {
        // Snap back to center
        activeCard.style.transform = 'translateX(0) rotate(0deg)';
        activeCard.style.opacity = '1';
      }
    }, false);

    function jigglePopcorn(event) {
      event.preventDefault();
      const popcorn = document.getElementById('popcornImage');
      popcorn.style.transform = 'rotate(15deg)';
      setTimeout(() => {
        popcorn.style.transform = 'rotate(-15deg)';
        setTimeout(() => {
          popcorn.style.transform = 'rotate(0deg)';
          setTimeout(() => {
            window.location.href = 'watchlist.html';
          }, 200);
        }, 200);
      }, 200);
    }
  </script>
</body>
</html>